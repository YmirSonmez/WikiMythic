# 5.7.2
## General
- Added `ThreadPoolSize` option in `config-general.yml` to limit the number of async threads used by Mythic. Defaults to -1 (no limit).
- Added `toggleTimer` utility command.
- Added `-p` option to `spawner create` and `spawner move` commands, to create/move at the player's location.

## Mechanics
### Projectiles
- Upgraded MEG bullet type for projectiles.
- Added bullet-related options for MEG projectiles: `bulletScale`, `bulletColor`, `bulletGlowing`, `bulletGlowColor`.
### Variables
- Added `DOUBLE` variable type.

## Targeters
- Added `usePitch=true` option to `@EntitiesInCone` targeter.

## Random Spawners
- Allow placeholders in random spawner levels.

## Placeholders
Added <caster.type> and <caster.type.name> placeholders.

## Bugs / Other
- Added some new features to the `CustomComponentRegistry` API.
- Moved data tags for items to use PDC instead of NBT, fixing issues with Spigot deserialization on 1.21.
- Fixed a loading issue with parent stats.
- Fixed StackOverflowError that could occur with stats.
- Fixed broken parent placeholders.
- Fixed a calculation error in EntitiesInCone for range.
- Fixed missing caster placeholders and added c. aliases.
- Fixed entity_effect/mobSpell particle issues.
- Fixed NPE in BukkitItemStack.
- Fixed NPE in auras.
- Fixed NPE when signaling mobs from console.
- Fixed skill parameters not being passed to skills called by condition actions.
- Fixed empty lines in drop ChatMessages not showing up.
- Fixed a memory leak caused by usages of entity metadata.
- Fixed a bug with onSpawnOrLoad event not firing.
- Fixed error spam with particles introduced in previous builds.
- Fixed plugin not loading on 1.19.4.
- Fixed invalid particle data causing issues.
- Fixed y out-of-bounds error for max world height calculations.
- Fixed an issue with threat tables where NPE and calculation errors were occurring.
- Fixed the setName mechanic looping issue by changing <caster.name> to <caster.type.name>.
- Fixed issues with lootsplosions causing items to not stack.

# 5.7.1
## General
- Added 1.21.1 support

# 5.7.0

**`Note: 1.21 support was a huge upgrade and there may still be bugs. Please make sure to report any bugs you find by opening an Issue or by letting us know in the `mythic-121-testing` channel in Discord`**

## General
- Added 1.20.5, 1.20.6 and 1.21 support
- Dropped support for 1.16.4, 1.18.2, 1.19.1, 1.19.2, and 1.19.3.
- Various options on mobs and skills that take an item can now accept a droptable and will use a random item from it, such as the Item mob type.

## Mobs
- Added support for new entity types: `Armadillo`, `Bogged`, and `Breeze`.
- Added new HEARING ability to mobs enabled by `Hearing.Enabled: true`. Requires 1.20+
- Added [`~onHear`](/Mobs/Mobs#hearing) trigger that responds to hearing sounds
- Added `Options.PreventConversion` to zombies and skeletons.
- Changed variables defined directly on the mob default to always saving.

## Skills
### Mechanics
- Added particles: `white_smoke`, `dust_plume`, `gust`, `gust_emitter`, `gust_dust`, and `trial_spawner_detection`
- Particle `mobSpellAmbient` was removed by Mojang in 1.21
- Allow `command` and `message` mechanics to target locations for the purpose of location-based placeholders.
- Renamed `setItemDisplay` mechanic to `setDisplayEntityItem` to clarify purpose and avoid naming conflicts.

#### NEW: `Log`
- `log{message="Debug to console with variables <caster.var.test>"}`

#### NEW: `SetTextDisplay`
- `setTextDisplay{text="text here"} @Target`

#### NEW: `Taunt`
- Sets the caster's threat to 110% of the current target's target and forces them to attack the caster. Requires threat tables.

#### NEW: `openTrades`
- `openTrades (openTrade, trade)` mechanic to open a merchant menu to the targeted player.
- Added `realTrade/real` attribute - determines if the player trades with the actual villager or not (ie drop trade xp, etc.).

#### NEW: `setChunkForceLoaded`
- Sets the target location's chunk to be force-loaded

#### DropItem
- Added `then=` skill to the dropItem mechanic that targets the dropped item entities.

### Conditions
- Added `onPass[Skill]` & `onFail[Skill]` for conditions.

#### NEW: `boundingBoxesOverlap`

#### NEW: `distanceFromPin`
- `distanceFromPin{pin=X;distance=<5}`

#### NEW: `distanceFromLocation`
- `distanceFromLocation` condition. Values `x`,`y`,`z`,`distance/d`, and optional `world` (default to players current world if no world name provided).

### Targeters
#### NEW: `@BlocksInPinRegion`

#### NEW: `@HighestBlock`
- Targets the highest location at the origin position.

#### NEW: `@TrackedPlayers`
- Targets players that are within render distance of and currently rendering the mob

#### NEW: `@ChunksinWERegion`
- Added `@ChunksinWERegion{region=X}` targeter.

#### Pin
- Added `random=true` option, if targeting a multi-pin it will target a random one instead of all of them.

### Placeholders
- Added `PlaceholderBoolean` which will evaluate to true if a variable is 'true' or '1', otherwise false.
- Added rounding support to `random.float` placeholder by using syntax `<random.float.1to5{round=2}>`

API
----
- Refactored EquipSlots to allow for custom slots.
- Various API improvements for MythicRPG.
- Added methods for dumping item component data.

Bugs / Other
------------
- Improved world isLoaded check.
- Removed `type` alias for `damageType` in damage mechanics to fix some conflicts.
- Removed adventure shading, switched to using native adventure with spigot libraries loader.
- Removed redundant old version checks.
- Fixed bugs with rounding in stat tooltips in some cases.
- Fixed y out of range error with random spawning.
- Fixed setName mechanic not updating properly when using custom nameplates.
- Fixed NPE in papi variable placeholders.
- Fixed several NPEs when trying to resolve player variables before a player has finished loading in.
- Fixed several more bugs with placeholder rounding.
- Fixed attribute slots not working on some versions.
- Fixed colors not working in stat formatting.
- Fixed async error with threat table targeters.
- Fixed NoSuchElementException leading to server crash with random spawning on 1.21.
- Fixed NPE in dumpNBTData method on 1.21.
- Fixed `Spawners.DisableCommandSaving` logic being backwards.
- Fixed yaw and pitch attributes not saving on spawners.
- Fixed spawners not saving.
- Fixed a bunch of broken targeters.
- Fixed NPE in VariableManager.
- Fixed attack speed stat (hopefully).
- Fixed spread not working on teleport mechanic with entity targets.
- Fixed bug with item display entities.
- Fixed backwards compatibility with potions.
- Fixed Armor and Attack Speed not being able to be set to 0.
- Fixed errors related to EntityManager.
- Fixed a bunch of spam errors about registering entities.
- Fixed NPE with mob eggs that have no display name.
- Fixed piglin brutes being broken for vanilla overrides.
- Fixed some other vanilla override issues with babies.
- Fixed totem_of_undying particle.
- Fixed a bunch of particle bugs.
- Fixed default potion level being 2 instead of 1.
- Fixed fireworks loading colors with RBG instead of RGB.
- Fixed onDamaged aura not working with skill damage, probably.
- Fixed ClassCastException with compatibility mode.
- Fixed NPE with `targetInterval` mechanic option.
- Fixed spread not working on teleport mechanic with entity targets.
- Fixed summon mechanic mobs inheriting caster's yaw in certain situations.
- Fixed `hasPotionEffect` condition on 1.21.
- Fixed custom attribute registration on 1.21+.
- Fixed async error with threat table targeters.
- Fixed NoSuchElementException leading to server crash with random spawning on 1.21.
- Fixed custom attribute registration on 1.21+.
- Fixed y out of range error with random spawning.
- Fixed summon mechanic mobs inheriting caster's yaw in certain situations.
- Fixed piglin brutes being broken for vanilla overrides.
- Fixed some other vanilla override issues with babies.
- Fixed default potion level being 2 instead of 1.
- Fixed fireworks loading colors with RBG instead of RGB.
- Fixed onDamaged aura not working with skill damage, probably.
- Fixed summon mechanic mobs inheriting caster's yaw in certain situations.
- Fixed `hasPotionEffect` condition on 1.21.
- Fixed custom attribute registration on 1.21+.
- Fixed spread not working on teleport mechanic with entity targets.
- Fixed `setName` mechanic not updating properly when using custom nameplates.
- Fixed `consumeSlotItem` mechanic not removing items with 0 amount
- Fixed MythicMobItemGenerateEvent#setItemStack
- Fixed damage modifiers and defensive stats not working in some cases when the final damage is zero
- Fixed mob data not always saving on server shutdown
- Fixed meleeAttack AI goal causing zombies to stutter or freeze sometimes
- Fixed persistent entities not loading correctly after chunk load due to papermc bug
- Fixed error preventing plugin from loading on Arclight
- Fixed config error causing plugin to require a restart after first install